<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.5: http://docutils.sourceforge.net/" />
<title>Docutils To Do List</title>
<meta name="author" content="David Goodger (with input from many); open to all Docutils developers" />
<meta name="date" content="2007-05-31" />
<meta name="copyright" content="This document has been placed in the public domain." />
<link rel="stylesheet" href="../../docutils/writers/html4css1/html4css1.css" type="text/css" />
</head>
<body>
<div class="document" id="docutils-to-do-list">
<h1 class="title"><a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> To Do List</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>David Goodger (with input from many); open to all Docutils
developers</td></tr>
<tr><th class="docinfo-name">Contact:</th>
<td><a class="first last reference external" href="mailto:goodger&#64;python.org">goodger&#64;python.org</a></td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2007-05-31</td></tr>
<tr><th class="docinfo-name">Revision:</th>
<td>5174</td></tr>
<tr><th class="docinfo-name">Copyright:</th>
<td>This document has been placed in the public domain.</td></tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#minimum-requirements-for-python-standard-library-candidacy" id="id9">Minimum Requirements for Python Standard Library Candidacy</a></li>
<li><a class="reference internal" href="#general" id="id10">General</a></li>
<li><a class="reference internal" href="#documentation" id="id11">Documentation</a><ul>
<li><a class="reference internal" href="#user-docs" id="id12">User Docs</a></li>
<li><a class="reference internal" href="#developer-docs" id="id13">Developer Docs</a></li>
<li><a class="reference internal" href="#how-tos" id="id14">How-Tos</a></li>
<li><a class="reference internal" href="#peps" id="id15">PEPs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python-source-reader" id="id16">Python Source Reader</a></li>
<li><a class="reference internal" href="#restructuredtext-parser" id="id17">reStructuredText Parser</a><ul>
<li><a class="reference internal" href="#directives" id="id18">Directives</a></li>
<li><a class="reference internal" href="#interpreted-text" id="id19">Interpreted Text</a></li>
</ul>
</li>
<li><a class="reference internal" href="#unimplemented-transforms" id="id20">Unimplemented Transforms</a></li>
<li><a class="reference internal" href="#html-writer" id="id21">HTML Writer</a></li>
<li><a class="reference internal" href="#pep-html-writer" id="id22">PEP/HTML Writer</a></li>
<li><a class="reference internal" href="#s5-html-writer" id="id23">S5/HTML Writer</a></li>
<li><a class="reference internal" href="#latex-writer" id="id24">LaTeX writer</a></li>
<li><a class="reference internal" href="#front-end-tools" id="id25">Front-End Tools</a></li>
</ul>
</div>
<p>Priority items are marked with &quot;&#64;&quot; symbols.  The more &#64;s, the higher
the priority.  Items in question form (containing &quot;?&quot;) are ideas which
require more thought and debate; they are potential to-do's.</p>
<p>Many of these items are awaiting champions.  If you see something
you'd like to tackle, please do!  If there's something you'd like to
see done but are unable to implement it yourself, please consider
donating to Docutils: <a class="reference external" href="http://sourceforge.net/donate/index.php?group_id=38414"><img align="middle" alt="Support the Docutils project!" class="align-middle" src="http://images.sourceforge.net/images/project-support.jpg" style="width: 88px; height: 32px;" /></a></p>
<p>Please see also the <a class="reference external" href="../../BUGS.html">Bugs</a> document for a list of bugs in Docutils.</p>
<div class="section" id="minimum-requirements-for-python-standard-library-candidacy">
<h1><a class="toc-backref" href="#id9">Minimum Requirements for Python Standard Library Candidacy</a></h1>
<p>Below are action items that must be added and issues that must be
addressed before Docutils can be considered suitable to be proposed
for inclusion in the Python standard library.</p>
<ul class="simple">
<li>Support for <a class="reference internal" href="#document-splitting">document splitting</a>.  May require some major code
rework.</li>
<li>Support for subdocuments (see <a class="reference internal" href="#large-documents">large documents</a>).</li>
<li><a class="reference internal" href="#object-numbering-and-object-references">Object numbering and object references</a>.</li>
<li><a class="reference internal" href="#nested-inline-markup">Nested inline markup</a>.</li>
<li><a class="reference internal" href="#python-source-reader">Python Source Reader</a>.</li>
<li>The HTML writer needs to be rewritten (or a second HTML writer
added) to allow for custom classes, and for arbitrary splitting
(stack-based?).</li>
<li><a class="reference internal" href="#documentation">Documentation</a> of the architecture.  Other docs too.</li>
<li>Plugin support.</li>
<li>A LaTeX writer making use of (La)TeX's power, so that the rendering
of the resulting documents is more easily customizable.  (Similar to
what you wrote about a new HTML Writer.)</li>
<li>Suitability for <a class="reference external" href="http://docutils.sf.net/sandbox/README.html#documenting-python">Python module documentation</a>.</li>
</ul>
</div>
<div class="section" id="general">
<h1><a class="toc-backref" href="#id10">General</a></h1>
<ul>
<li><p class="first">We don't have consistent (or no) encoding handling for command line
arguments.  See
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2890/focus=2957">http://thread.gmane.org/gmane.text.docutils.user/2890/focus=2957</a>&gt;.</p>
</li>
<li><p class="first">Improve handling on Windows:</p>
<ul class="simple">
<li>Get graphical installer.</li>
<li>Make rst2html.py an .exe file using py2exe.</li>
</ul>
</li>
<li><p id="gui">The user interface is very difficult to use for most Windows users;
you can't really expect them to use the command line.  We need some
kind of GUI that can launch rst2html.py, and save the HTML output to
a file, and launch a browser.  What's important is that we get
settings to work with the GUI.  So we need some way to dynamically
generate a list of settings for the GUI.  The current settings_spec
for OptionParser doesn't seem to be usable for this for the
following reasons:</p>
<ul class="simple">
<li>It's biased toward the command line -- there are <em>two</em> options for
one boolean setting.</li>
<li>You cannot have both a one-line description and a longer
description for tooltips/help-texts.</li>
<li>It doesn't provide hints for the input type.  You cannot easily
infer the type of a setting from its validator, because any
component can add new validators.  In fact, it may be necessary to
have both a hint about the input type (e.g. string) and a
validator (valid ID), or it may be necessary to have a different
set of choices for the CLI (1, INFO, 2, ...) and for the GUI
(INFO, WARNING, ...).</li>
<li>It's coupled to the OptionParser.  We want to be able to change
the underlying system without breaking everything.</li>
<li>It's a bunch of primitive structures.  We want an extensible (thus
object-oriented) interface.</li>
</ul>
<p>So we probably need to create a class for storing all the settings,
and auto-generate the OptionParser data from that.</p>
<p>I talked to Stephan Deibel about getting Docutils integrated into
Wing IDE.  He said it's possible, and he'd be willing to help.
There's a scripting interface to Wing, which we'd use.  We can
dynamically generate a list of preferences and not worry too much
about the rendering (from what I understood); Wing's whole GUI is
dynamic anyway.  The interface could be made usable for other GUIs.
For example, we could try to get option support for DocFactory.  //
FW</p>
</li>
<li><p class="first">Allow different report levels for STDERR and system_messages inside
the document?</p>
</li>
<li><p class="first">Change the docutils-update script (in sandbox/infrastructure), to
support arbitrary branch snapshots.</p>
</li>
<li><p class="first">Move some general-interest sandboxes out of individuals'
directories, into subprojects?</p>
</li>
<li><p class="first">Add option for file (and URL) access restriction to make Docutils
usable in Wikis and similar applications.</p>
<p>2005-03-21: added <tt class="docutils literal"><span class="pre">file_insertion_enabled</span></tt> &amp; <tt class="docutils literal"><span class="pre">raw_enabled</span></tt>
settings.  These partially solve the problem, allowing or disabling
<strong>all</strong> file accesses, but not limited access.</p>
</li>
<li><p class="first">Configuration file handling needs discussion:</p>
<ul class="simple">
<li>There should be some error checking on the contents of config
files.  How much checking should be done?  How loudly should
Docutils complain if it encounters an error/problem?</li>
<li>Docutils doesn't complain when it doesn't find a configuration
file supplied with the <tt class="docutils literal"><span class="pre">--config</span></tt> option.  Should it?  (If yes,
error or warning?)</li>
</ul>
</li>
<li><p class="first">Internationalization:</p>
<ul class="simple">
<li>I18n needs refactoring, the language dictionaries are difficult to
maintain.  Maybe have a look at gettext or similar tools.</li>
<li>Language modules: in accented languages it may be useful to have
both accented and unaccented entries in the
<tt class="docutils literal"><span class="pre">bibliographic_fields</span></tt> mapping for versatility.</li>
<li>Add a &quot;--strict-language&quot; option &amp; setting: no English fallback
for language-dependent features.</li>
<li>Add internationalization to <span class="target" id="footer-boilerplate-text">footer boilerplate text</span> (resulting
from &quot;--generator&quot;, &quot;--source-link&quot;, and &quot;--date&quot; etc.), allowing
translations.</li>
</ul>
</li>
<li><p class="first">Add validation?  See <a class="reference external" href="http://pytrex.sourceforge.net">http://pytrex.sourceforge.net</a>, RELAX NG, pyRXP.</p>
</li>
<li><p class="first">In <tt class="docutils literal"><span class="pre">docutils.readers.get_reader_class</span></tt> (&amp; <tt class="docutils literal"><span class="pre">parsers</span></tt> &amp;
<tt class="docutils literal"><span class="pre">writers</span></tt> too), should we be importing &quot;standalone&quot; or
&quot;docutils.readers.standalone&quot;?  (This would avoid importing
top-level modules if the module name is not in docutils/readers.
Potential nastiness.)</p>
</li>
<li><p class="first">Perhaps store a <span class="target" id="name-to-id-mapping-file">name-to-id mapping file</span>?  This could be stored
permanently, read by subsequent processing runs, and updated with
new entries.  (&quot;Persistent ID mapping&quot;?)</p>
</li>
<li><p class="first">Perhaps the <tt class="docutils literal"><span class="pre">Component.supports</span></tt> method should deal with
individual features (&quot;meta&quot; etc.) instead of formats (&quot;html&quot; etc.)?</p>
</li>
<li><p class="first">Add <span class="target" id="object-numbering-and-object-references">object numbering and object references</span> (tables &amp; figures).
These would be the equivalent of DocBook's &quot;formal&quot; elements.</p>
<p>We may need <span class="target" id="persistent-sequences">persistent sequences</span>, such as chapter numbers.  See
<a class="reference external" href="http://xml.openoffice.org/">OpenOffice.org XML</a> &quot;fields&quot;.  Should the sequences be automatic
or manual (user-specifyable)?</p>
<p>We need to name the objects:</p>
<ul>
<li><p class="first">&quot;name&quot; option for the &quot;figure&quot; directive?</p>
<pre class="literal-block">
.. figure:: image.png
   :name: image's name
</pre>
<p>Same for the &quot;table&quot; directive:</p>
<pre class="literal-block">
.. table:: optional title here
   :name: table's name

   =====  =====
     x    not x
   =====  =====
   True   False
   False  True
   =====  =====
</pre>
<p>This would also allow other options to be set, like border
styles.  The same technique could be used for other objects.</p>
<p>A preliminary &quot;table&quot; directive has been implemented, supporting
table titles.  Perhaps the name should derive from the title.</p>
</li>
<li><p class="first">The object could also be done this way:</p>
<pre class="literal-block">
.. _figure name:

.. figure:: image.png
</pre>
<p>This may be a more general solution, equally applicable to tables.
However, explicit naming using an option seems simpler to users.</p>
</li>
<li><p class="first">Perhaps the figure name could be incorporated into the figure
definition, as an optional inline target part of the directive
argument:</p>
<pre class="literal-block">
.. figure:: _`figure name` image.png
</pre>
<p>Maybe with a delimiter:</p>
<pre class="literal-block">
.. figure:: _`figure name`: image.png
</pre>
<p>Or some other, simpler syntax.</p>
</li>
</ul>
<p>We'll also need syntax for object references.  See <a class="reference external" href="http://xml.openoffice.org/">OpenOffice.org
XML</a> &quot;reference fields&quot;:</p>
<ul>
<li><p class="first">Parameterized substitutions?  For example:</p>
<pre class="literal-block">
See |figure (figure name)| on |page (figure name)|.

.. |figure (name)| figure-ref:: (name)
.. |page (name)| page-ref:: (name)
</pre>
<p>The result would be:</p>
<pre class="literal-block">
See figure 3.11 on page 157.
</pre>
<p>But this would require substitution directives to be processed at
reference-time, not at definition-time as they are now.  Or,
perhaps the directives could just leave <tt class="docutils literal"><span class="pre">pending</span></tt> elements
behind, and the transforms do the work?  How to pass the data
through?  Too complicated.</p>
</li>
<li><p class="first">An interpreted text approach is simpler and better:</p>
<pre class="literal-block">
See :figure:`figure name` on :page:`figure name`.
</pre>
<p>The &quot;figure&quot; and &quot;page&quot; roles could generate appropriate
boilerplate text.  The position of the role (prefix or suffix)
could also be utilized.</p>
<p>See <a class="reference internal" href="#interpreted-text">Interpreted Text</a> below.</p>
</li>
<li><p class="first">We could leave the boilerplate text up to the document:</p>
<pre class="literal-block">
See Figure :fig:`figure name` on page :pg:`figure name`.
</pre>
</li>
<li><p class="first">Reference boilerplate could be specified in the document
(defaulting to nothing):</p>
<pre class="literal-block">
.. fignum::
   :prefix-ref: &quot;Figure &quot;
   :prefix-caption: &quot;Fig. &quot;
   :suffix-caption: :
</pre>
</li>
</ul>
</li>
<li><p class="first">Think about <span class="target" id="large-documents">large documents</span> made up of multiple subdocument
files.  Issues: continuity (<a class="reference internal" href="#persistent-sequences">persistent sequences</a> above),
cross-references (<a class="reference internal" href="#name-to-id-mapping-file">name-to-id mapping file</a> above and <a class="reference internal" href="#targets-in-other-documents">targets in
other documents</a> below), splitting (<a class="reference internal" href="#document-splitting">document splitting</a> below).</p>
<p>When writing a book, the author probably wants to split it up into
files, perhaps one per chapter (but perhaps even more detailed).
However, we'd like to be able to have references from one chapter to
another, and have continuous numbering (pages and chapters, as
applicable).  Of course, none of this is implemented yet.  There has
been some thought put into some aspects; see <a class="reference external" href="../ref/rst/directives.html#including-an-external-document-fragment">the &quot;include&quot;
directive</a> and the <a class="reference internal" href="#reference-merging">Reference Merging</a> transform below.</p>
<p>When I was working with SGML in Japan, we had a system where there
was a top-level coordinating file, book.sgml, which contained the
top-level structure of a book: the &lt;book&gt; element, containing the
book &lt;title&gt; and empty component elements (&lt;preface&gt;, &lt;chapter&gt;,
&lt;appendix&gt;, etc.), each with filename attributes pointing to the
actual source for the component.  Something like this:</p>
<pre class="literal-block">
&lt;book id=&quot;bk01&quot;&gt;
&lt;title&gt;Title of the Book&lt;/title&gt;
&lt;preface inrefid=&quot;pr01&quot;&gt;&lt;/preface&gt;
&lt;chapter inrefid=&quot;ch01&quot;&gt;&lt;/chapter&gt;
&lt;chapter inrefid=&quot;ch02&quot;&gt;&lt;/chapter&gt;
&lt;chapter inrefid=&quot;ch03&quot;&gt;&lt;/chapter&gt;
&lt;appendix inrefid=&quot;ap01&quot;&gt;&lt;/appendix&gt;
&lt;/book&gt;
</pre>
<p>(The &quot;inrefid&quot; attribute stood for &quot;insertion reference ID&quot;.)</p>
<p>The processing system would process each component separately, but
it would recognize and use the book file to coordinate chapter and
page numbering, and keep a persistent ID to (title, page number)
mapping database for cross-references.  Docutils could use a similar
system for large-scale, multipart documents.</p>
<p>Aahz's idea:</p>
<blockquote>
<p>First the ToC:</p>
<pre class="literal-block">
.. ToC-list::
    Introduction.txt
    Objects.txt
    Data.txt
    Control.txt
</pre>
<p>Then a sample use:</p>
<pre class="literal-block">
.. include:: ToC.txt

As I said earlier in chapter :chapter:`Objects.txt`, the
reference count gets increased every time a binding is made.
</pre>
<p>Which produces:</p>
<pre class="literal-block">
As I said earlier in chapter 2, the
reference count gets increased every time a binding is made.
</pre>
<p>The ToC in this form doesn't even need to be references to actual
reST documents; I'm simply doing it that way for a minimum of
future-proofing, in case I do want to add the ability to pick up
references within external chapters.</p>
</blockquote>
<p>Perhaps, instead of ToC (which would overload the &quot;contents&quot;
directive concept already in use), we could use &quot;manifest&quot;.  A
&quot;manifest&quot; directive might associate local reference names with
files:</p>
<pre class="literal-block">
.. manifest::
   intro: Introduction.txt
   objects: Objects.txt
   data: Data.txt
   control: Control.txt
</pre>
<p>Then the sample becomes:</p>
<pre class="literal-block">
.. include:: manifest.txt

As I said earlier in chapter :chapter:`objects`, the
reference count gets increased every time a binding is made.
</pre>
</li>
<li><p class="first">Add support for <span class="target" id="multiple-output-files">multiple output files</span> and <span class="target" id="generic-data-handling">generic data
handling</span>:</p>
<p>It should be possible for a component to <strong>emit or reference</strong> data
to be either <strong>included or referenced</strong> in the output document.
Examples of such data are stylesheets or images.</p>
<p>For this, we need a &quot;data&quot; object which stores the data either
inline or by referring to a file.  The Docutils framework is
responsible for either:</p>
<ul class="simple">
<li>storing the data in the appropriate location (e.g. in the
directory of the output file, or in a user-specified directory)
and providing the paths of the stored files to the writer, <em>or</em></li>
<li>providing the data itself to the writer so that it can be embedded
in the output document.</li>
</ul>
<p>This approach decouples data handling from the data source (which
can either be embedded or referenced) and the destination (which can
either be embedded or referenced as well).</p>
<p>See &lt;<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.devel/3631">http://article.gmane.org/gmane.text.docutils.devel/3631</a>&gt;.</p>
</li>
<li><p class="first">Add testing for Docutils' front end tools?</p>
</li>
<li><p class="first">Publisher: &quot;Ordinary setup&quot; shouldn't requre specific ordering; at
the very least, there ought to be error checking higher up in the
call chain.  [Aahz]</p>
<p><tt class="docutils literal"><span class="pre">Publisher.get_settings</span></tt> requires that all components be set up
before it's called.  Perhaps the I/O <em>objects</em> shouldn't be set, but
I/O <em>classes</em>.  Then options are set up (<tt class="docutils literal"><span class="pre">.set_options</span></tt>), and
<tt class="docutils literal"><span class="pre">Publisher.set_io</span></tt> (or equivalent code) is called with source &amp;
destination paths, creating the I/O objects.</p>
<p>Perhaps I/O objects shouldn't be instantiated until required.  For
split output, the Writer may be called multiple times, once for each
doctree, and each doctree should have a separate Output object (with
a different path).  Is the &quot;Builder&quot; pattern applicable here?</p>
</li>
<li><p class="first">Perhaps I/O objects should become full-fledged components (i.e.
subclasses of <tt class="docutils literal"><span class="pre">docutils.Component</span></tt>, as are Readers, Parsers, and
Writers now), and thus have associated option/setting specs and
transforms.</p>
</li>
<li><p class="first">Multiple file I/O suggestion from Michael Hudson: use a file-like
object or something you can iterate over to get file-like objects.</p>
</li>
<li><p class="first">Add an &quot;--input-language&quot; option &amp; setting?  Specify a different
language module for input (bibliographic fields, directives) than
for output.  The &quot;--language&quot; option would set both input &amp; output
languages.</p>
</li>
<li><p class="first">Auto-generate reference tables for language-dependent features?
Could be generated from the source modules.  A special command-line
option could be added to Docutils front ends to do this.  (Idea from
Engelbert Gruber.)</p>
</li>
<li><p class="first">Enable feedback of some kind from internal decisions, such as
reporting the successful input encoding.  Modify runtime settings?
System message?  Simple stderr output?</p>
</li>
<li><p class="first">Rationalize Writer settings (HTML/LaTeX/PEP) -- share settings.</p>
</li>
<li><p class="first">Merge docs/user/latex.txt info into tools.txt and config.txt.</p>
</li>
<li><p class="first">Add an &quot;--include file&quot; command-line option (config setting too?),
equivalent to &quot;.. include:: file&quot; as the first line of the doc text?
Especially useful for character entity sets, text transform specs,
boilerplate, etc.</p>
</li>
<li><p class="first">Parameterize the Reporter object or class?  See the <a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/1112">2004-02-18
&quot;rest checking and source path&quot;</a> thread.</p>
</li>
<li><p class="first">Add a &quot;disable_transforms&quot; setting?  And a dummy Writer subclass
that does nothing when its .write() method is called?  Would allow
for easy syntax checking.  See the <a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/1112">2004-02-18 &quot;rest checking and
source path&quot;</a> thread.</p>
</li>
<li><p class="first">Add a generic meta-stylesheet mechanism?  An external file could
associate style names (&quot;class&quot; attributes) with specific elements.
Could be generalized to arbitrary output attributes; useful for HTML
&amp; XMLs.  Aahz implemented something like this in
sandbox/aahz/Effective/EffMap.py.</p>
</li>
<li><p id="classes-for-table-cells">William Dode suggested that table cells be assigned &quot;class&quot;
attributes by columns, so that stylesheets can affect text
alignment.  Unfortunately, there doesn't seem to be a way (in HTML
at least) to leverage the &quot;colspec&quot; elements (HTML &quot;col&quot; tags) by
adding classes to them.  The resulting HTML is very verbose:</p>
<pre class="literal-block">
&lt;td class=&quot;col1&quot;&gt;111&lt;/td&gt;
&lt;td class=&quot;col2&quot;&gt;222&lt;/td&gt;
...
</pre>
<p>At the very least, it should be an option.  People who don't use it
shouldn't be penalized by increases in their HTML file sizes.</p>
<p>Table rows could also be assigned classes (like odd/even).  That
would be easier to implement.</p>
<p>How should it be implemented?</p>
<ul class="simple">
<li>There could be writer options (column classes &amp; row classes) with
standard values.</li>
<li>The table directive could grow some options.  Something like
&quot;:cell-classes: col1 col2 col3&quot; (either must match the number of
columns, or repeat to fill?)  and &quot;:row-classes: odd even&quot; (repeat
to fill; body rows only, or header rows too?).</li>
</ul>
<p>Probably per-table directive options are best.  The &quot;class&quot; values
could be used by any writer, and applying such classes to all tables
in a document with writer options is too broad.</p>
</li>
<li><p class="first">Add file-specific settings support to config files, like:</p>
<pre class="literal-block">
[file index.txt]
compact-lists: no
</pre>
<p>Is this even possible?  Should the criterion be the name of the
input file or the output file?  Alternative (more explicit) syntax:</p>
<pre class="literal-block">
[source_file index.txt]
...

[dest_file index.html]
...
</pre>
</li>
<li><p class="first">The &quot;validator&quot; support added to OptionParser is very similar to
&quot;<a class="reference external" href="http://code.enthought.com/traits/">traits</a>&quot; in <a class="reference external" href="http://www.scipy.org/">SciPy</a>.  Perhaps something could be done with them?
(Had I known about traits when I was implementing docutils.frontend,
I may have used them instead of rolling my own.)</p>
</li>
<li><p class="first">tools/buildhtml.py: Extend the --prune option (&quot;prune&quot; config
setting) to accept file names (generic path) in addition to
directories (e.g. --prune=docs/user/rst/cheatsheet.txt, which should
<em>not</em> be converted to HTML).</p>
</li>
<li><p class="first">Add support for <span class="target" id="plugins">plugins</span>.</p>
</li>
<li><p class="first"><span class="target" id="config-directories">Config directories</span>: Currently, ~/.docutils, ./docutils.conf/, &amp;
/etc/docutils.conf are read as configuration files.  Proposal: allow
~/.docutils to be a a configuration <em>directory</em>, along with
/etc/docutils/ and ./docutils.conf/.  Within these directories,
check for config.txt files.  We can also have subdirectories here,
for plugins, S5 themes, components (readers/writers/parsers) etc.</p>
<p>Docutils will continue to support configuration files for backwards
compatibility.</p>
</li>
<li><p class="first">Add support for document decorations other than headers &amp; footers?
For example, top/bottom/side navigation bars for web pages.  Generic
decorations?</p>
<p>Seems like a bad idea as long as it isn't independent from the ouput
format (for example, navigation bars are only useful for web pages).</p>
</li>
<li><p class="first">docutils_update: Check for a <tt class="docutils literal"><span class="pre">Makefile</span></tt> in a directory, and run
<tt class="docutils literal"><span class="pre">make</span></tt> if found?  This would allow for variant processing on
specific source files, such as running rst2s5.py instead of
rst2html.py.</p>
</li>
<li><p class="first">Add a &quot;disable table of contents&quot; setting?  The S5 writer could set
it as a default.  Rationale:</p>
<blockquote>
<p>The <tt class="docutils literal"><span class="pre">contents</span></tt> (table of contents) directive must not be used
[in S5/HTML documents].  It changes the CSS class of headings
and they won't show up correctly in the screen presentation.</p>
<p class="attribution">&mdash;<a class="reference external" href="../user/slide-shows.html">Easy Slide Shows With reStructuredText &amp; S5</a></p>
</blockquote>
</li>
</ul>
</div>
<div class="section" id="documentation">
<h1><a class="toc-backref" href="#id11">Documentation</a></h1>
<div class="section" id="user-docs">
<h2><a class="toc-backref" href="#id12">User Docs</a></h2>
<ul class="simple">
<li>Add a FAQ entry about using Docutils (with reStructuredText) on a
server and that it's terribly slow.  See the first paragraphs in
&lt;<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/1584">http://article.gmane.org/gmane.text.docutils.user/1584</a>&gt;.</li>
<li>Add document about what Docutils has previously been used for
(web/use-cases.txt?).</li>
<li>Improve index in docs/user/config.txt.</li>
</ul>
</div>
<div class="section" id="developer-docs">
<h2><a class="toc-backref" href="#id13">Developer Docs</a></h2>
<ul class="simple">
<li>Complete <a class="reference external" href="../api/runtime-settings.html">Docutils Runtime Settings</a>.</li>
<li>Improve the internal module documentation (docstrings in the code).
Specific deficiencies listed below.<ul>
<li>docutils.parsers.rst.states.State.build_table: data structure
required (including StringList).</li>
<li>docutils.parsers.rst.states: more complete documentation of parser
internals.</li>
</ul>
</li>
<li>docs/ref/doctree.txt: DTD element structural relationships,
semantics, and attributes.  In progress; element descriptions to be
completed.</li>
<li>Document the <tt class="docutils literal"><span class="pre">pending</span></tt> elements, how they're generated and what
they do.</li>
<li>Document the transforms (perhaps in docstrings?): how they're used,
what they do, dependencies &amp; order considerations.</li>
<li>Document the HTML classes used by html4css1.py.</li>
<li>Write an overview of the Docutils architecture, as an introduction
for developers.  What connects to what, why, and how.  Either update
PEP 258 (see <a class="reference internal" href="#peps">PEPs</a> below) or as a separate doc.</li>
<li>Give information about unit tests.  Maybe as a howto?</li>
<li>Document the docutils.nodes APIs.</li>
<li>Complete the docs/api/publisher.txt docs.</li>
</ul>
</div>
<div class="section" id="how-tos">
<h2><a class="toc-backref" href="#id14">How-Tos</a></h2>
<ul class="simple">
<li>Creating Docutils Writers</li>
<li>Creating Docutils Readers</li>
<li>Creating Docutils Transforms</li>
<li>Creating Docutils Parsers</li>
<li>Using Docutils as a Library</li>
</ul>
</div>
<div class="section" id="peps">
<h2><a class="toc-backref" href="#id15">PEPs</a></h2>
<ul>
<li><p class="first">Complete PEP 258 Docutils Design Specification.</p>
<ul>
<li><p class="first">Fill in the blanks in API details.</p>
</li>
<li><p class="first">Specify the nodes.py internal data structure implementation?</p>
<blockquote>
<p>[Tibs:] Eventually we need to have direct documentation in
there on how it all hangs together - the DTD is not enough
(indeed, is it still meant to be correct?  [Yes, it is.
--DG]).</p>
</blockquote>
</li>
</ul>
</li>
<li><p class="first">Rework PEP 257, separating style from spec from tools, wrt Docutils?
See Doc-SIG from 2001-06-19/20.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="python-source-reader">
<h1><a class="toc-backref" href="#id16">Python Source Reader</a></h1>
<p>General:</p>
<ul class="simple">
<li>Analyze Tony Ibbs' PySource code.</li>
<li>Analyze Doug Hellmann's HappyDoc project.</li>
<li>Investigate how POD handles literate programming.</li>
<li>Take the best ideas and integrate them into Docutils.</li>
</ul>
<p>Miscellaneous ideas:</p>
<ul>
<li><p class="first">Ask Python-dev for opinions (GvR for a pronouncement) on special
variables (__author__, __version__, etc.): convenience vs. namespace
pollution.  Ask opinions on whether or not Docutils should recognize
&amp; use them.</p>
</li>
<li><p class="first">If we can detect that a comment block begins with <tt class="docutils literal"><span class="pre">##</span></tt>, a la
JavaDoc, it might be useful to indicate interspersed section headers
&amp; explanatory text in a module.  For example:</p>
<pre class="literal-block">
&quot;&quot;&quot;Module docstring.&quot;&quot;&quot;

##
# Constants
# =========

a = 1
b = 2

##
# Exception Classes
# =================

class MyException(Exception): pass

# etc.
</pre>
</li>
<li><p class="first">Should standalone strings also become (module/class) docstrings?
Under what conditions?  We want to prevent arbitrary strings from
becomming docstrings of prior attribute assignments etc.  Assume
that there must be no blank lines between attributes and attribute
docstrings?  (Use lineno of NEWLINE token.)</p>
<p>Triple-quotes are sometimes used for multi-line comments (such as
commenting out blocks of code).  How to reconcile?</p>
</li>
<li><p class="first">HappyDoc's idea of using comment blocks when there's no docstring
may be useful to get around the conflict between <a class="reference external" href="../peps/pep-0258.html#additional-docstrings">additional
docstrings</a> and <tt class="docutils literal"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span></tt> for module docstrings.
A module could begin like this:</p>
<pre class="literal-block">
#!/usr/bin/python
# :Author: Me
# :Copyright: whatever

&quot;&quot;&quot;This is the public module docstring (``__doc__``).&quot;&quot;&quot;

# More docs, in comments.
# All comments at the beginning of a module could be
# accumulated as docstrings.
# We can't have another docstring here, because of the
# ``__future__`` statement.

from __future__ import division
</pre>
<p>Using the JavaDoc convention of a doc-comment block beginning with
<tt class="docutils literal"><span class="pre">##</span></tt> is useful though.  It allows doc-comments and implementation
comments.</p>
</li>
<li><p class="first">HappyDoc uses an initial comment block to set &quot;parser configuration
values&quot;.  Do the same thing for Docutils, to set runtime settings on
a per-module basis?  I.e.:</p>
<pre class="literal-block">
# Docutils:setting=value
</pre>
<p>Could be used to turn on/off function parameter comment recognition
&amp; other marginal features.  Could be used as a general mechanism to
augment config files and command-line options (but which takes
precedence?).</p>
</li>
<li><p class="first">Multi-file output should be divisible at arbitrary level.</p>
</li>
<li><p class="first">Support all forms of <tt class="docutils literal"><span class="pre">import</span></tt> statements:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">import</span> <span class="pre">module</span></tt>: listed as &quot;module&quot;</li>
<li><tt class="docutils literal"><span class="pre">import</span> <span class="pre">module</span> <span class="pre">as</span> <span class="pre">alias</span></tt>: &quot;alias (module)&quot;</li>
<li><tt class="docutils literal"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">identifier</span></tt>: &quot;identifier (from module)&quot;</li>
<li><tt class="docutils literal"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">identifier</span> <span class="pre">as</span> <span class="pre">alias</span></tt>: &quot;alias (identifier
from module)&quot;</li>
<li><tt class="docutils literal"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">*</span></tt>: &quot;all identifiers (<tt class="docutils literal"><span class="pre">*</span></tt>) from module&quot;</li>
</ul>
</li>
<li><p class="first">Have links to colorized Python source files from API docs?  And
vice-versa: backlinks from the colorized source files to the API
docs!</p>
</li>
<li><p class="first">In summaries, use the first <em>sentence</em> of a docstring if the first
line is not followed by a blank line.</p>
</li>
</ul>
</div>
<div class="section" id="restructuredtext-parser">
<h1><a class="toc-backref" href="#id17">reStructuredText Parser</a></h1>
<p>Also see the <a class="reference external" href="rst/alternatives.html#or-not-to-do">... Or Not To Do?</a> list.</p>
<ul>
<li><p class="first">Recognize unicode whitespace and punctuation.  See
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2765">http://thread.gmane.org/gmane.text.docutils.user/2765</a>&gt;.</p>
</li>
<li><p class="first">Allow embedded references and not only embedded URIs: <tt class="docutils literal"><span class="pre">`link</span> <span class="pre">text</span>
<span class="pre">&lt;reference_&gt;`_</span></tt>; see the second half of
&lt;<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.devel/3738">http://article.gmane.org/gmane.text.docutils.devel/3738</a>&gt;.</p>
</li>
<li><p class="first">Another list problem:</p>
<pre class="literal-block">
* foo
      * bar
      * baz
</pre>
<p>This ends up as a definition list.  This is more of a usability
issue.</p>
</li>
<li><p class="first">This case is probably meant to be a nested list, but it ends up as a
list inside a block-quote without an error message:</p>
<pre class="literal-block">
- foo

 - bar
</pre>
<p>It should probably just be an error.</p>
<p>The problem with this is that you don't notice easily in HTML that
it's not a nested list but a block-quote -- there's not much of a
visual difference.</p>
</li>
<li><p class="first">Treat enumerated lists that are not arabic and consist of only one
item in a single line as ordinary paragraphs.  See
&lt;<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/2635">http://article.gmane.org/gmane.text.docutils.user/2635</a>&gt;.</p>
</li>
<li><p class="first">The citation syntax could use some improvements.  See
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2499">http://thread.gmane.org/gmane.text.docutils.user/2499</a>&gt; (and the
sub-thread at
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2499/focus=3028">http://thread.gmane.org/gmane.text.docutils.user/2499/focus=3028</a>&gt;,
and the follow-ups at
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3087">http://thread.gmane.org/gmane.text.docutils.user/3087</a>&gt;,
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3110">http://thread.gmane.org/gmane.text.docutils.user/3110</a>&gt;,
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3114">http://thread.gmane.org/gmane.text.docutils.user/3114</a>&gt;),
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2443">http://thread.gmane.org/gmane.text.docutils.user/2443</a>&gt;,
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2715">http://thread.gmane.org/gmane.text.docutils.user/2715</a>&gt;,
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3027">http://thread.gmane.org/gmane.text.docutils.user/3027</a>&gt;,
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3120">http://thread.gmane.org/gmane.text.docutils.user/3120</a>&gt;,
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3253">http://thread.gmane.org/gmane.text.docutils.user/3253</a>&gt;.</p>
</li>
<li><p class="first">The current list-recognition logic has too many false positives, as
in</p>
<pre class="literal-block">
* Aorta
* V. cava superior
* V. cava inferior
</pre>
<p>Here <tt class="docutils literal"><span class="pre">V.</span></tt> is recognized as an enumerator, which leads to
confusion.  We need to find a solution that resolves such problems
without complicating the spec to much.</p>
<p>See &lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2524">http://thread.gmane.org/gmane.text.docutils.user/2524</a>&gt;.</p>
</li>
<li><p class="first">Add indirect links via citation references &amp; footnote references.
Example:</p>
<pre class="literal-block">
`Goodger (2005)`_ is helpful.

.. _Goodger (2005): [goodger2005]_
.. [goodger2005] citation text
</pre>
<p>See &lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2499">http://thread.gmane.org/gmane.text.docutils.user/2499</a>&gt;.</p>
</li>
<li><p class="first">Change the specification so that more punctuation is allowed
before/after inline markup start/end string
(<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.cvs/3824">http://article.gmane.org/gmane.text.docutils.cvs/3824</a>).</p>
</li>
<li><p class="first">Complain about bad URI characters
(<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/2046">http://article.gmane.org/gmane.text.docutils.user/2046</a>) and
disallow internal whitespace
(<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/2214">http://article.gmane.org/gmane.text.docutils.user/2214</a>).</p>
</li>
<li><p class="first">Create <tt class="docutils literal"><span class="pre">info</span></tt>-level system messages for unnecessarily
backslash-escaped characters (as in <tt class="docutils literal"><span class="pre">&quot;\something&quot;</span></tt>, rendered as
&quot;something&quot;) to allow checking for errors which silently slipped
through.</p>
</li>
<li><p class="first">Add (functional) tests for untested roles.</p>
</li>
<li><p class="first">Add test for &quot;:figwidth: image&quot; option of &quot;figure&quot; directive.  (Test
code needs to check if PIL is available on the system.)</p>
</li>
<li><p class="first">Add support for CJK double-width whitespace (indentation) &amp;
punctuation characters (markup; e.g. double-width &quot;*&quot;, &quot;-&quot;, &quot;+&quot;)?</p>
</li>
<li><p class="first">Add motivation sections for constructs in spec.</p>
</li>
<li><p class="first">Support generic hyperlink references to <span class="target" id="targets-in-other-documents">targets in other
documents</span>?  Not in an HTML-centric way, though (it's trivial to say
<tt class="docutils literal"><span class="pre">http://www.example.com/doc#name</span></tt>, and useless in non-HTML
contexts).  XLink/XPointer?  <tt class="docutils literal"><span class="pre">..</span> <span class="pre">baseref::</span></tt>?  See Doc-SIG
2001-08-10.</p>
</li>
<li><p id="adaptable-file-extensions">In target URLs, it would be useful to not explicitly specify the
file extension.  If we're generating HTML, then &quot;.html&quot; is
appropriate; if PDF, then &quot;.pdf&quot;; etc.  How about using &quot;.*&quot; to
indicate &quot;choose the most appropriate filename extension&quot;?  For
example:</p>
<pre class="literal-block">
.. _Another Document: another.*
</pre>
<p>What is to be done for output formats that don't <em>have</em> hyperlinks?
For example, LaTeX targeted at print.  Hyperlinks may be &quot;called
out&quot;, as footnotes with explicit URLs.  (Don't convert the links.)</p>
<p>But then there's also LaTeX targeted at PDFs, which <em>can</em> have
links.  Perhaps a runtime setting for &quot;*&quot; could explicitly provide
the extension, defaulting to the output file's extension.</p>
<p>Should the system check for existing files?  No, not practical.</p>
<p>Handle documents only, or objects (images, etc.) also?</p>
<p>If this handles images also, how to differentiate between document
and image links?  Element context (within &quot;image&quot;)?  Which image
extension to use for which document format?  Again, a runtime
setting would suffice.</p>
<p>This may not be just a parser issue; it may need framework support.</p>
<p>Mailing list threads: <a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/1239">Images in both HTML and LaTeX</a> (especially
<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/1278">this summary of Lea's objections</a>), <a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/1915">more-universal links?</a>,
<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/2438">Output-format-sensitive link targets?</a></p>
<p>Idea from Jim Fulton: an external lookup table of targets:</p>
<blockquote>
<p>I would like to specify the extension (e.g. .txt) [in the
source, rather than <tt class="docutils literal"><span class="pre">filename.*</span></tt>], but tell the converter to
change references to the files anticipating that the files will
be converted too.</p>
<p>For example:</p>
<pre class="literal-block">
.. _Another Document: another.txt

rst2html.py --convert-links &quot;another.txt bar.txt&quot; foo.txt
</pre>
<p>That is, name the files for which extensions should be converted.</p>
<p>Note that I want to refer to original files in the original text
(another.txt rather than another.txt) because I want the
unconverted text to stand on its own.</p>
<p>Note that in most cases, people will be able to use globs:</p>
<pre class="literal-block">
rst2html.py --convert-link-extensions-for &quot;`echo *.txt`&quot; foo.txt
</pre>
<p>It might be nice to be able to use multiple arguments, as in:</p>
<pre class="literal-block">
rst2html.py --convert-link-extensions-for *.txt -- foo.txt
</pre>
<pre class="literal-block">
&gt; What is to be done for output formats
&gt; that don't have hyperlinks?
</pre>
<p>Don't convert the links.</p>
<pre class="literal-block">
&gt; Handle documents only, or objects
&gt; (images, etc.) also?
</pre>
<p>No, documents only, but there really is no need for gueswork.
Just get the file names as command-line arguments.  EIBTI
[explicit is better than implicit].</p>
</blockquote>
<p>For images, we probably need separate solution (which is being
worked on), whereas for documents, the issue is basically
interlinking between reStructuredText documents.  IMO, this cries
for support for multiple input and output files, i.e. support for
documents which comprise multiple files.  Adding adaptable file
extensions seems like a kludge.  // FW</p>
</li>
<li><p class="first">Implement the header row separator modification to table.el.  (Wrote
to Takaaki Ota &amp; the table.el mailing list on 2001-08-12, suggesting
support for &quot;=====&quot; header rows.  On 2001-08-17 he replied, saying
he'd put it on his to-do list, but &quot;don't hold your breath&quot;.)</p>
</li>
<li><p class="first">Fix the parser's indentation handling to conform with the stricter
definition in the spec.  (Explicit markup blocks should be strict or
forgiving?)</p>
<!-- XXX What does this mean?  Can you elaborate, David? -->
</li>
<li><p class="first">Make the parser modular.  Allow syntax constructs to be added or
disabled at run-time.  Subclassing is probably not enough because it
makes it difficult to apply multiple extensions.</p>
</li>
<li><p class="first">Generalize the &quot;doctest block&quot; construct (which is overly
Python-centric) to other interactive sessions?  &quot;Doctest block&quot;
could be renamed to &quot;I/O block&quot; or &quot;interactive block&quot;, and each of
these could also be recognized as such by the parser:</p>
<ul>
<li><p class="first">Shell sessions:</p>
<pre class="literal-block">
$ cat example1.txt
A block beginning with a &quot;$ &quot; prompt is interpreted as a shell
session interactive block.  As with Doctest blocks, the
interactive block ends with the first blank line, and wouldn't
have to be indented.
</pre>
</li>
<li><p class="first">Root shell sessions:</p>
<pre class="literal-block">
# cat example2.txt
A block beginning with a &quot;# &quot; prompt is interpreted as a root
shell session (the user is or has to be logged in as root)
interactive block.  Again, the block ends with a blank line.
</pre>
</li>
</ul>
<p>Other standard (and unambiguous) interactive session prompts could
easily be added (such as &quot;&gt; &quot; for WinDOS).</p>
<p>Tony Ibbs spoke out against this idea (2002-06-14 Doc-SIG thread
&quot;docutils feedback&quot;).</p>
</li>
<li><p class="first">The &quot;doctest&quot; element should go away.  The construct could simply be
a front-end to generic literal blocks.  We could immediately (in
0.4, or 0.5) remove the doctest node from the doctree, but leave the
syntax in reST.  The reST parser could represent doctest blocks as
literal blocks with a class attribute.  The syntax could be left in
reST for a set period of time.</p>
</li>
<li><p class="first">Add support for pragma (syntax-altering) directives.</p>
<p>Some pragma directives could be local-scope unless explicitly
specified as global/pragma using &quot;:global:&quot; options.</p>
</li>
<li><p class="first">Support whitespace in angle-bracketed standalone URLs according to
Appendix E (&quot;Recommendations for Delimiting URI in Context&quot;) of <a class="reference external" href="http://www.rfc-editor.org/rfc/rfc2396.txt">RFC
2396</a>.</p>
</li>
<li><p class="first">Use the vertical spacing of the source text to determine the
corresponding vertical spacing of the output?</p>
</li>
<li><p class="first">[From Mark Nodine]  For cells in simple tables that comprise a
single line, the justification can be inferred according to the
following rules:</p>
<ol class="arabic simple">
<li>If the text begins at the leftmost column of the cell,
then left justification, ELSE</li>
<li>If the text begins at the rightmost column of the cell,
then right justification, ELSE</li>
<li>Center justification.</li>
</ol>
<p>The onus is on the author to make the text unambiguous by adding
blank columns as necessary.  There should be a parser setting to
turn off justification-recognition (normally on would be fine).</p>
<p>Decimal justification?</p>
<p>All this shouldn't be done automatically.  Only when it's requested
by the user, e.g. with something like this:</p>
<pre class="literal-block">
.. table::
   :auto-indent:

   (Table goes here.)
</pre>
<p>Otherwise it will break existing documents.</p>
</li>
<li><p class="first">Generate a warning or info message for paragraphs which should have
been lists, like this one:</p>
<pre class="literal-block">
1. line one
3. line two
</pre>
</li>
<li><p class="first">Generalize the &quot;target-notes&quot; directive into a command-line option
somehow?  See docutils-develop 2003-02-13.</p>
</li>
<li><p class="first">Allow a &quot;::&quot;-only paragraph (first line, actually) to introduce a
<span class="target" id="literal-block-without-a-blank-line">literal block without a blank line</span>?  (Idea from Paul Moore.)</p>
<pre class="literal-block">
::
    This is a literal block
</pre>
<p>Is indentation enough to make the separation between a paragraph
which contains just a <tt class="docutils literal"><span class="pre">::</span></tt> and the literal text unambiguous?
(There's one problem with this concession: If one wants a definition
list item which defines the term &quot;::&quot;, we'd have to escape it.)  It
would only be reasonable to apply it to &quot;::&quot;-only paragraphs though.
I think the blank line is visually necessary if there's text before
the &quot;::&quot;:</p>
<pre class="literal-block">
The text in this paragraph needs separation
from the literal block following::
    This doesn't look right.
</pre>
</li>
<li><p class="first">Add new syntax for <span class="target" id="nested-inline-markup">nested inline markup</span>?  Or extend the parser to
parse nested inline markup somehow?  See the <a class="reference external" href="rst/alternatives.html#nested-inline-markup">collected notes</a>.</p>
</li>
<li><p class="first">Drop the backticks from embedded URIs with omitted reference text?
Should the angle brackets be kept in the output or not?</p>
<pre class="literal-block">
&lt;file_name&gt;_
</pre>
<p>Probably not worth the trouble.</p>
</li>
<li><p class="first">Add <span class="target" id="math-markup">math markup</span>.  We should try for a general solution, that's
applicable to any output format.  Using a standard, such as <a class="reference external" href="http://www.w3.org/TR/MathML2/">MathML</a>,
would be best.  TeX (or <a class="reference external" href="http://pear.math.pitt.edu/mathzilla/itex2mmlItex.html">itex</a>) would be acceptable as a <em>front-end</em>
to MathML.  See <a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/118">the culmination of a relevant discussion</a>.</p>
<p>Both a directive and an interpreted text role will be necessary (for
each markup).  Directive example:</p>
<pre class="literal-block">
.. itex::
   \alpha_t(i) = P(O_1, O_2, \dots O_t, q_t = S_i \lambda)
</pre>
<p>The same thing inline:</p>
<pre class="literal-block">
The equation in question is :itex:`\alpha_t(i) = P(O_1, O_2,
\dots O_t, q_t = S_i \lambda)`.
</pre>
</li>
<li><p class="first">How about a syntax for alternative hyperlink behavior, such as &quot;open
in a new window&quot; (as in HTML's <tt class="docutils literal"><span class="pre">&lt;a</span> <span class="pre">target=&quot;_blank&quot;&gt;</span></tt>)?  Double
angle brackets might work for inline targets:</p>
<pre class="literal-block">
The `reference docs &lt;&lt;url&gt;&gt;`__ may be handy.
</pre>
<p>But what about explicit targets?</p>
<p>The MoinMoin wiki uses a caret (&quot;^&quot;) at the beginning of the URL
(&quot;^&quot; is not a legal URI character).  That could work for both inline
and explicit targets:</p>
<pre class="literal-block">
The `reference docs &lt;^url&gt;`__ may be handy.

.. _name: ^url
</pre>
<p>This may be too specific to HTML.  It hasn't been requested very
often either.</p>
</li>
<li><p class="first">Add an option to add URI schemes at runtime.</p>
</li>
<li><p class="first"><span class="target" id="segmented-lists">Segmented lists</span>:</p>
<pre class="literal-block">
: segment : segment : segment
: segment : segment : very long
  segment
: segment : segment : segment
</pre>
<p>The initial colon (&quot;:&quot;) can be thought of as a type of bullet</p>
<p>We could even have segment titles:</p>
<pre class="literal-block">
:: title  : title   : title
: segment : segment : segment
: segment : segment : segment
</pre>
<p>This would correspond well to DocBook's SegmentedList.  Output could
be tabular or &quot;name: value&quot; pairs, as described in DocBook's docs.</p>
</li>
<li><p class="first">Allow backslash-escaped colons in field names:</p>
<pre class="literal-block">
:Case Study\: Event Handling: This chapter will be dropped.
</pre>
</li>
<li><p class="first"><span class="target" id="footnote-spaces">footnote spaces</span>:</p>
<p>When supplying the command line options
--footnote-references=brackets and --use-latex-footnotes with the
LaTeX writer (which might very well happen when using configuration
files), the spaces in front of footnote references aren't trimmed.</p>
</li>
<li><p class="first">Enable grid <span class="target" id="tables-inside-xml-comments">tables inside XML comments</span>, where &quot;--&quot; ends comments.
I see three implementation possibilities:</p>
<ol class="arabic simple">
<li>Make the table syntax characters into &quot;table&quot; directive options.
This is the most flexible but most difficult, and we probably
don't need that much flexibility.</li>
<li>Substitute &quot;~&quot; for &quot;-&quot; with a specialized directive option
(e.g. &quot;:tildes:&quot;).</li>
<li>Make the standard table syntax recognize &quot;~&quot; as well as &quot;-&quot;, even
without a directive option.  Individual tables would have to be
internally consistent.</li>
</ol>
<p>Directive options are preferable to configuration settings, because
tables are document-specific.  A pragma directive would be another
approach, to set the syntax once for a whole document.</p>
<p>In the meantime, the <a class="reference external" href="../ref/rst/directives.html#list-table">list-table</a> directive is a good replacement for
grid tables inside XML comments.</p>
</li>
<li><p class="first">Generalize docinfo contents (bibliographic fields): remove specific
fields, and have only a single generic &quot;field&quot;?</p>
</li>
</ul>
<div class="section" id="directives">
<h2><a class="toc-backref" href="#id18">Directives</a></h2>
<p>Directives below are often referred to as &quot;module.directive&quot;, the
directive function.  The &quot;module.&quot; is not part of the directive name
when used in a document.</p>
<ul>
<li><p class="first">Make the <span class="target" id="directive-interface">directive interface</span> object-oriented
(<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/1871">http://article.gmane.org/gmane.text.docutils.user/1871</a>).</p>
</li>
<li><p class="first">Allow for field lists in list tables.  See
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.devel/3392">http://thread.gmane.org/gmane.text.docutils.devel/3392</a>&gt;.</p>
</li>
<li><p id="unify-tables">Unify table implementations and unify options of table directives
(<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.user/1857">http://article.gmane.org/gmane.text.docutils.user/1857</a>).</p>
</li>
<li><p class="first">Allow directives to be added at run-time?</p>
</li>
<li><p class="first">Use the language module for directive option names?</p>
</li>
<li><p class="first">Add &quot;substitution_only&quot; and &quot;substitution_ok&quot; function attributes,
and automate context checking?</p>
</li>
<li><p class="first">Change directive functions to directive classes?  Superclass'
<tt class="docutils literal"><span class="pre">__init__()</span></tt> could handle all the bookkeeping.</p>
</li>
<li><p class="first">Implement options or features on existing directives:</p>
<ul>
<li><p class="first">Add a &quot;name&quot; option to directives, to set an author-supplied
identifier?</p>
</li>
<li><p class="first">All directives that produce titled elements should grow implicit
reference names based on the titles.</p>
</li>
<li><p class="first">Allow the <span class="target" id="trim">:trim:</span> option for all directives when they occur in a
substitution definition, not only the <a class="reference external" href="../ref/rst/directives.html#unicode-character-codes">unicode</a> directive.</p>
</li>
<li><p class="first">Add the &quot;class&quot; option to the unicode directive.  For example, you
might want to get characters or strings with borders around them.</p>
</li>
<li><p class="first"><span class="target" id="images-figure">images.figure</span>: &quot;title&quot; and &quot;number&quot;, to indicate a formal
figure?</p>
</li>
<li><p class="first"><span class="target" id="parts-sectnum">parts.sectnum</span>: &quot;local&quot;?, &quot;refnum&quot;</p>
<p>A &quot;local&quot; option could enable numbering for sections from a
certain point down, and sections in the rest of the document are
not numbered.  For example, a reference section of a manual might
be numbered, but not the rest.  OTOH, an all-or-nothing approach
would probably be enough.</p>
<p>The &quot;sectnum&quot; directive should be usable multiple times in a
single document.  For example, in a long document with &quot;chapter&quot;
and &quot;appendix&quot; sections, there could be a second &quot;sectnum&quot; before
the first appendix, changing the sequence used (from 1,2,3... to
A,B,C...).  This is where the &quot;local&quot; concept comes in.  This part
of the implementation can be left for later.</p>
<p>A &quot;refnum&quot; option (better name?) would insert reference names
(targets) consisting of the reference number.  Then a URL could be
of the form <tt class="docutils literal"><span class="pre">http://host/document.html#2.5</span></tt> (or &quot;2-5&quot;?).  Allow
internal references by number?  Allow name-based <em>and</em>
number-based ids at the same time, or only one or the other (which
would the table of contents use)?  Usage issue: altering the
section structure of a document could render hyperlinks invalid.</p>
</li>
<li><p class="first"><span class="target" id="parts-contents">parts.contents</span>: Add a &quot;suppress&quot; or &quot;prune&quot; option?  It would
suppress contents display for sections in a branch from that point
down.  Or a new directive, like &quot;prune-contents&quot;?</p>
<p>Add an option to include topics in the TOC?  Another for sidebars?
The &quot;topic&quot; directive could have a &quot;contents&quot; option, or the
&quot;contents&quot; directive&quot; could have an &quot;include-topics&quot; option.  See
docutils-develop 2003-01-29.</p>
</li>
<li><p class="first"><span class="target" id="parts-header">parts.header</span> &amp; <span class="target" id="parts-footer">parts.footer</span>: Support multiple, named headers
&amp; footers?  For example, separate headers &amp; footers for odd, even,
and the first page of a document.</p>
<p>This may be too specific to output formats which have a notion of
&quot;pages&quot;.</p>
</li>
<li><p class="first"><span class="target" id="misc-class">misc.class</span>:</p>
<ul class="simple">
<li>Add a <tt class="docutils literal"><span class="pre">:parent:</span></tt> option for setting the parent's class
(<a class="reference external" href="http://article.gmane.org/gmane.text.docutils.devel/3165">http://article.gmane.org/gmane.text.docutils.devel/3165</a>).</li>
</ul>
</li>
<li><p class="first"><span class="target" id="misc-include">misc.include</span>:</p>
<ul>
<li><p class="first">Option to select a range of lines?</p>
</li>
<li><p class="first">Option to label lines?</p>
</li>
<li><p class="first">How about an environment variable, say RSTINCLUDEPATH or
RSTPATH, for standard includes (as in <tt class="docutils literal"><span class="pre">..</span> <span class="pre">include::</span> <span class="pre">&lt;name&gt;</span></tt>)?
This could be combined with a setting/option to allow
user-defined include directories.</p>
</li>
<li><p class="first">Add support for inclusion by URL?</p>
<pre class="literal-block">
.. include::
   :url: http://www.example.org/inclusion.txt
</pre>
</li>
</ul>
</li>
<li><p class="first"><span class="target" id="misc-raw">misc.raw</span>: add a &quot;destination&quot; option to the &quot;raw&quot; directive?</p>
<pre class="literal-block">
.. raw:: html
   :destination: head

   &lt;link ...&gt;
</pre>
<p>It needs thought &amp; discussion though, to come up with a consistent
set of destination labels and consistent behavior.</p>
<p>And placing HTML code inside the &lt;head&gt; element of an HTML
document is rather the job of a templating system.</p>
</li>
<li><p class="first"><span class="target" id="body-sidebar">body.sidebar</span>: Allow internal section structure?  Adornment
styles would be independent of the main document.</p>
<p>That is really complicated, however, and the document model
greatly benefits from its simplicity.</p>
</li>
</ul>
</li>
<li><p class="first">Implement directives.  Each of the list items below begins with an
identifier of the form, &quot;module_name.directive_function_name&quot;.  The
directive name itself could be the same as the
directive_function_name, or it could differ.</p>
<ul>
<li><p class="first"><span class="target" id="html-imagemap">html.imagemap</span></p>
<p>It has the disadvantage that it's only easily implementable for
HTML, so it's specific to one output format.</p>
<p>(For non-HTML writers, the imagemap would have to be replaced with
the image only.)</p>
</li>
<li><p class="first"><span class="target" id="parts-endnotes">parts.endnotes</span> (or &quot;footnotes&quot;): See <a class="reference internal" href="#footnote-citation-gathering">Footnote &amp; Citation Gathering</a>.</p>
</li>
<li><p class="first"><span class="target" id="parts-citations">parts.citations</span>: See <a class="reference internal" href="#footnote-citation-gathering">Footnote &amp; Citation Gathering</a>.</p>
</li>
<li><p class="first"><span class="target" id="misc-language">misc.language</span>: Specify (= change) the language of a document at
parse time.</p>
</li>
<li><p class="first"><span class="target" id="misc-settings">misc.settings</span>: Set any(?) Docutils runtime setting from within
a document?  Needs much thought and discussion.</p>
<p>Security concerns need to be taken into account (it shouldn't be
possible to enable <tt class="docutils literal"><span class="pre">file_insertion_enabled</span></tt> from within a
document), and settings that only would have taken effect before
the directive (like <tt class="docutils literal"><span class="pre">tab-width</span></tt>) shouldn't be accessible either.
(How about changing <tt class="docutils literal"><span class="pre">tab-width</span></tt> before an <tt class="docutils literal"><span class="pre">include</span></tt> directive
though?  Or should <tt class="docutils literal"><span class="pre">include</span></tt> rather grow a <tt class="docutils literal"><span class="pre">tab-width</span></tt>
option?)</p>
<p>See this sub-thread:
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.user/3620/focus=3649">http://thread.gmane.org/gmane.text.docutils.user/3620/focus=3649</a>&gt;</p>
</li>
<li><p class="first"><span class="target" id="misc-gather">misc.gather</span>: Gather (move, or copy) all instances of a specific
element.  A generalization of the &quot;endnotes&quot; &amp; &quot;citations&quot; ideas.</p>
</li>
<li><p class="first">Add a custom &quot;directive&quot; directive, equivalent to &quot;role&quot;?  For
example:</p>
<pre class="literal-block">
.. directive:: incr

   .. class:: incremental

.. incr::

&quot;``.. incr::``&quot; above is equivalent to &quot;``.. class:: incremental``&quot;.
</pre>
<p>Another example:</p>
<pre class="literal-block">
.. directive:: printed-links

   .. topic:: Links
      :class: print-block

      .. target-notes::
         :class: print-inline
</pre>
<p>This acts like macros.  The directive contents will have to be
evaluated when referenced, not when defined.</p>
<ul class="simple">
<li>Needs a better name?  &quot;Macro&quot;, &quot;substitution&quot;?</li>
<li>What to do with directive arguments &amp; options when the
macro/directive is referenced?</li>
</ul>
</li>
<li><p class="first">Make the meaning of block quotes overridable?  Only a 1-shot
though; doesn't solve the general problem.</p>
</li>
<li><p id="conditional-directives">Docutils already has the ability to say &quot;use this content for
Writer X&quot; (via the &quot;raw&quot; directive), but it doesn't have the
ability to say &quot;use this content for any Writer other than X&quot;.  It
wouldn't be difficult to add this ability though.</p>
<p>My first idea would be to add a set of conditional directives.
Let's call them &quot;writer-is&quot; and &quot;writer-is-not&quot; for discussion
purposes (don't worry about implemention details).  We might
have:</p>
<pre class="literal-block">
.. writer-is:: text-only

   ::

       +----------+
       |   SNMP   |
       +----------+
       |   UDP    |
       +----------+
       |    IP    |
       +----------+
       | Ethernet |
       +----------+

.. writer-is:: pdf

   .. figure:: protocol_stack.eps

.. writer-is-not:: text-only pdf

   .. figure:: protocol_stack.png
</pre>
<p>This could be an interface to the Filter transform
(docutils.transforms.components.Filter).</p>
<p>The ideas in <a class="reference internal" href="#adaptable-file-extensions">adaptable file extensions</a> above may also be
applicable here.</p>
<p>SVG's &quot;switch&quot; statement may provide inspiration.</p>
<p>Here's an example of a directive that could produce multiple
outputs (<em>both</em> raw troff pass-through <em>and</em> a GIF, for example)
and allow the Writer to select.</p>
<pre class="literal-block">
.. eqn::

   .EQ
   delim %%
   .EN
   %sum from i=o to inf c sup i~=~lim from {m -&gt; inf}
   sum from i=0 to m sup i%
   .EQ
   delim off
   .EN
</pre>
</li>
<li><p class="first"><span class="target" id="body-example">body.example</span>: Examples; suggested by Simon Hefti.  Semantics as
per Docbook's &quot;example&quot;; admonition-style, numbered, reference,
with a caption/title.</p>
</li>
<li><p class="first"><span class="target" id="body-index">body.index</span>: Index targets.</p>
<p>See <a class="reference external" href="./rst/alternatives.html#index-entries-indexes">Index Entries &amp; Indexes</a>.</p>
</li>
<li><p class="first"><span class="target" id="body-literal">body.literal</span>: Literal block, possibly &quot;formal&quot; (see <a class="reference internal" href="#object-numbering-and-object-references">object
numbering and object references</a> above).  Possible options:</p>
<ul>
<li><p class="first">&quot;highlight&quot; a range of lines</p>
</li>
<li><p class="first">include only a specified range of lines</p>
</li>
<li><p class="first">&quot;number&quot; or &quot;line-numbers&quot;</p>
</li>
<li><p class="first">&quot;styled&quot; could indicate that the directive should check for
style comments at the end of lines to indicate styling or
markup.</p>
<p>Specific derivatives (i.e., a &quot;python-interactive&quot; directive)
could interpret style based on cues, like the &quot;&gt;&gt;&gt; &quot; prompt and
&quot;input()&quot;/&quot;raw_input()&quot; calls.</p>
</li>
</ul>
<p>See docutils-users 2003-03-03.</p>
</li>
<li><p class="first"><span class="target" id="body-listing">body.listing</span>: Code listing with title (to be numbered
eventually), equivalent of &quot;figure&quot; and &quot;table&quot; directives.</p>
</li>
<li><p class="first"><span class="target" id="colorize-python">colorize.python</span>: Colorize Python code.  Fine for HTML output,
but what about other formats?  Revert to a literal block?  Do we
need some kind of &quot;alternate&quot; mechanism?  Perhaps use a &quot;pending&quot;
transform, which could switch its output based on the &quot;format&quot; in
use.  Use a factory function &quot;transformFF()&quot; which returns either
&quot;HTMLTransform()&quot; instance or &quot;GenericTransform&quot; instance?</p>
<p>If we take a Python-to-HTML pretty-printer and make it output a
Docutils internal doctree (as per nodes.py) instead of HTML, then
each output format's stylesheet (or equivalent) mechanism could
take care of the rest.  The pretty-printer code could turn this
doctree fragment:</p>
<pre class="literal-block">
&lt;literal_block xml:space=&quot;preserve&quot;&gt;
print 'This is Python code.'
for i in range(10):
    print i
&lt;/literal_block&gt;
</pre>
<p>into something like this (&quot;&lt;/&gt;&quot; is end-tag shorthand):</p>
<pre class="literal-block">
&lt;literal_block xml:space=&quot;preserve&quot; class=&quot;python&quot;&gt;
&lt;keyword&gt;print&lt;/&gt; &lt;string&gt;'This is Python code.'&lt;/&gt;
&lt;keyword&gt;for&lt;/&gt; &lt;identifier&gt;i&lt;/&gt; &lt;keyword
&gt;in&lt;/&gt; &lt;expression&gt;range(10)&lt;/&gt;:
    &lt;keyword&gt;print&lt;/&gt; &lt;expression&gt;i&lt;/&gt;
&lt;/literal_block&gt;
</pre>
<p>But I'm leaning toward adding a single new general-purpose
element, &quot;phrase&quot;, equivalent to HTML's &lt;span&gt;.  Here's the
example rewritten using the generic &quot;phrase&quot;:</p>
<pre class="literal-block">
&lt;literal_block xml:space=&quot;preserve&quot; class=&quot;python&quot;&gt;
&lt;phrase class=&quot;keyword&quot;&gt;print&lt;/&gt; &lt;phrase
 class=&quot;string&quot;&gt;'This is Python code.'&lt;/&gt;
&lt;phrase class=&quot;keyword&quot;&gt;for&lt;/&gt; &lt;phrase
 class=&quot;identifier&quot;&gt;i&lt;/&gt; &lt;phrase class=&quot;keyword&quot;&gt;in&lt;/&gt; &lt;phrase
 class=&quot;expression&quot;&gt;range(10)&lt;/&gt;:
    &lt;phrase class=&quot;keyword&quot;&gt;print&lt;/&gt; &lt;phrase
     class=&quot;expression&quot;&gt;i&lt;/&gt;
&lt;/literal_block&gt;
</pre>
<p>It's more verbose but more easily extensible and more appropriate
for the case at hand.  It allows us to edit style sheets to add
support for new formats, not the Docutils code itself.</p>
<p>Perhaps a single directive with a format parameter would be
better:</p>
<pre class="literal-block">
.. colorize:: python

   print 'This is Python code.'
   for i in range(10):
       print i
</pre>
<p>But directives can have synonyms for convenience.  &quot;format::
python&quot; was suggested, but &quot;format&quot; seems too generic.</p>
</li>
<li><p class="first"><span class="target" id="pysource-usage">pysource.usage</span>: Extract a usage message from the program,
either by running it at the command line with a <tt class="docutils literal"><span class="pre">--help</span></tt> option
or through an exposed API.  [Suggestion for Optik.]</p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="interpreted-text">
<h2><a class="toc-backref" href="#id19">Interpreted Text</a></h2>
<p>Interpreted text is entirely a reStructuredText markup construct, a
way to get around built-in limitations of the medium.  Some roles are
intended to introduce new doctree elements, such as &quot;title-reference&quot;.
Others are merely convenience features, like &quot;RFC&quot;.</p>
<p>All supported interpreted text roles must already be known to the
Parser when they are encountered in a document.  Whether pre-defined
in core/client code, or in the document, doesn't matter; the roles
just need to have already been declared.  Adding a new role may
involve adding a new element to the DTD and may require extensive
support, therefore such additions should be well thought-out.  There
should be a limited number of roles.</p>
<p>The only place where no limit is placed on variation is at the start,
at the Reader/Parser interface.  Transforms are inserted by the Reader
into the Transformer's queue, where non-standard elements are
converted.  Once past the Transformer, no variation from the standard
Docutils doctree is possible.</p>
<p>An example is the Python Source Reader, which will use interpreted
text extensively.  The default role will be &quot;Python identifier&quot;, which
will be further interpreted by namespace context into &lt;class&gt;,
&lt;method&gt;, &lt;module&gt;, &lt;attribute&gt;, etc. elements (see pysource.dtd),
which will be transformed into standard hyperlink references, which
will be processed by the various Writers.  No Writer will need to have
any knowledge of the Python-Reader origin of these elements.</p>
<ul>
<li><p class="first">Add explicit interpreted text roles for the rest of the implicit
inline markup constructs: named-reference, anonymous-reference,
footnote-reference, citation-reference, substitution-reference,
target, uri-reference (&amp; synonyms).</p>
</li>
<li><p class="first">Add directives for each role as well?  This would allow indirect
nested markup:</p>
<pre class="literal-block">
This text contains |nested inline markup|.

.. |nested inline markup| emphasis::

   nested ``inline`` markup
</pre>
</li>
<li><p class="first">Implement roles:</p>
<ul>
<li><p class="first">&quot;<span class="target" id="raw-wrapped">raw-wrapped</span>&quot; (or &quot;<span class="target" id="raw-wrap">raw-wrap</span>&quot;): Base role to wrap raw text
around role contents.</p>
<p>For example, the following reStructuredText source ...</p>
<pre class="literal-block">
.. role:: red(raw-formatting)
   :prefix:
       :html: &lt;font color=&quot;red&quot;&gt;
       :latex: {\color{red}
   :suffix:
       :html: &lt;/font&gt;
       :latex: }

colored :red:`text`
</pre>
<p>... will yield the following document fragment:</p>
<pre class="literal-block">
&lt;paragraph&gt;
    colored
    &lt;inline classes=&quot;red&quot;&gt;
        &lt;raw format=&quot;html&quot;&gt;
            &lt;font color=&quot;red&quot;&gt;
        &lt;raw format=&quot;latex&quot;&gt;
            {\color{red}
        &lt;inline classes=&quot;red&quot;&gt;
            text
        &lt;raw format=&quot;html&quot;&gt;
            &lt;/font&gt;
        &lt;raw format=&quot;latex&quot;&gt;
            }
</pre>
<p>Possibly without the intermediate &quot;inline&quot; node.</p>
</li>
<li><p class="first"><span class="target" id="acronym-and-abbreviation">&quot;acronym&quot; and &quot;abbreviation&quot;</span>: Associate the full text with a
short form.  Jason Diamond's description:</p>
<blockquote>
<p>I want to translate <tt class="docutils literal"><span class="pre">`reST`:acronym:</span></tt> into <tt class="docutils literal"><span class="pre">&lt;acronym</span>
<span class="pre">title='reStructuredText'&gt;reST&lt;/acronym&gt;</span></tt>.  The value of the
title attribute has to be defined out-of-band since you can't
parameterize interpreted text.  Right now I have them in a
separate file but I'm experimenting with creating a directive
that will use some form of reST syntax to let you define them.</p>
</blockquote>
<p>Should Docutils complain about undefined acronyms or
abbreviations?</p>
<p>What to do if there are multiple definitions?  How to
differentiate between CSS (Content Scrambling System) and CSS
(Cascading Style Sheets) in a single document?  David Priest
responds,</p>
<blockquote>
<p>The short answer is: you don't.  Anyone who did such a thing
would be writing very poor documentation indeed.  (Though I
note that <a class="reference external" href="rst/alternatives.html#parameterized-interpreted-text">somewhere else in the docs</a>, there's mention of
allowing replacement text to be associated with the
abbreviation.  That takes care of the duplicate
acronyms/abbreviations problem, though a writer would be
foolish to ever need it.)</p>
</blockquote>
<p>How to define the full text?  Possibilities:</p>
<ol class="arabic">
<li><p class="first">With a directive and a definition list?</p>
<pre class="literal-block">
.. acronyms::

   reST
       reStructuredText
   DPS
       Docstring Processing System
</pre>
<p>Would this list remain in the document as a glossary, or would
it simply build an internal lookup table?  A &quot;glossary&quot;
directive could be used to make the intention clear.
Acronyms/abbreviations and glossaries could work together.</p>
<p>Then again, a glossary could be formed by gathering individual
definitions from around the document.</p>
</li>
<li><p class="first">Some kind of <a class="reference external" href="rst/alternatives.html#parameterized-interpreted-text">inline parameter syntax</a>?</p>
<pre class="literal-block">
`reST &lt;reStructuredText&gt;`:acronym: is `WYSIWYG &lt;what you
see is what you get&gt;`:acronym: plaintext markup.
</pre>
</li>
<li><p class="first">A combination of 1 &amp; 2?</p>
<p>The multiple definitions issue could be handled by establishing
rules of priority.  For example, directive-based lookup tables
have highest priority, followed by the first inline definition.
Multiple definitions in directive-based lookup tables would
trigger warnings, similar to the rules of <a class="reference external" href="../ref/rst/restructuredtext.html#implicit-hyperlink-targets">implicit hyperlink
targets</a>.</p>
</li>
<li><p class="first">Using substitutions?</p>
<pre class="literal-block">
.. |reST| acronym:: reST
   :text: reStructuredText
</pre>
</li>
</ol>
<p>What do we do for other formats than HTML which do not support
tool tips?  Put the full text in parentheses?</p>
</li>
<li><p class="first">&quot;figure&quot;, &quot;table&quot;, &quot;listing&quot;, &quot;chapter&quot;, &quot;page&quot;, etc: See <a class="reference internal" href="#object-numbering-and-object-references">object
numbering and object references</a> above.</p>
</li>
<li><p class="first">&quot;glossary-term&quot;: This would establish a link to a glossary.  It
would require an associated &quot;glossary-entry&quot; directive, whose
contents could be a definition list:</p>
<pre class="literal-block">
.. glossary-entry::

   term1
       definition1
   term2
       definition2
</pre>
<p>This would allow entries to be defined anywhere in the document,
and collected (via a &quot;glossary&quot; directive perhaps) at one point.</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="unimplemented-transforms">
<h1><a class="toc-backref" href="#id20">Unimplemented Transforms</a></h1>
<ul>
<li><p class="first"><span class="target" id="footnote-citation-gathering">Footnote &amp; Citation Gathering</span></p>
<p>Collect and move footnotes &amp; citations to the end of a document.
(Separate transforms.)</p>
</li>
<li><p class="first"><span class="target" id="reference-merging">Reference Merging</span></p>
<p>When merging two or more subdocuments (such as docstrings),
conflicting references may need to be resolved.  There may be:</p>
<ul class="simple">
<li>duplicate reference and/or substitution names that need to be made
unique; and/or</li>
<li>duplicate footnote numbers that need to be renumbered.</li>
</ul>
<p>Should this be done before or after reference-resolving transforms
are applied?  What about references from within one subdocument to
inside another?</p>
</li>
<li><p class="first"><span class="target" id="document-splitting">Document Splitting</span></p>
<p>If the processed document is written to multiple files (possibly in
a directory tree), it will need to be split up.  Internal references
will have to be adjusted.</p>
<p>(HTML only?  Initially, yes.  Eventually, anything should be
splittable.)</p>
<p>Ideas:</p>
<ul>
<li><p class="first">Insert a &quot;destination&quot; attribute into the root element of each
split-out document, containing the path/filename.  The Output
object or Writer will recognize this attribute and split out the
files accordingly.  Must allow for common headers &amp; footers,
prev/next, breadcrumbs, etc.</p>
</li>
<li><p class="first">Transform a single-root document into a document containing
multiple subdocuments, recursively.  The content model of the
&quot;document&quot; element would have to change to:</p>
<pre class="literal-block">
&lt;!ELEMENT document
    ( (title, subtitle?)?,
      decoration?,
      (docinfo, transition?)?,
      %structure.model;,
      document* )&gt;
</pre>
<p>(I.e., add the last line -- 0 or more document elements.)</p>
<p>Let's look at the case of hierarchical (directories and files)
HTML output.  Each document element containing further document
elements would correspond to a directory (with an index.html file
for the content preceding the subdocuments).  Each document
element containing no subdocuments (i.e., structure model elements
only) corresponds to a concrete file with no directory.</p>
<p>The natural transform would be to map sections to subdocuments,
but possibly only a given number of levels deep.</p>
</li>
</ul>
</li>
<li><p class="first"><span class="target" id="navigation">Navigation</span></p>
<p>If a document is split up, each segment will need navigation links:
parent, children (small TOC), previous (preorder), next (preorder).
Part of <a class="reference internal" href="#document-splitting">Document Splitting</a>?</p>
</li>
<li><p class="first"><span class="target" id="list-of-system-messages">List of System Messages</span></p>
<p>The <tt class="docutils literal"><span class="pre">system_message</span></tt> elements are inserted into the document tree,
adjacent to the problems themselves where possible.  Some (those
generated post-parse) are kept until later, in
<tt class="docutils literal"><span class="pre">document.messages</span></tt>, and added as a special final section,
&quot;Docutils System Messages&quot;.</p>
<p>Docutils could be made to generate hyperlinks to all known
system_messages and add them to the document, perhaps to the end of
the &quot;Docutils System Messages&quot; section.</p>
<p>Fred L. Drake, Jr. wrote:</p>
<blockquote>
<p>I'd like to propose that both parse- and transformation-time
messages are included in the &quot;Docutils System Messages&quot; section.
If there are no objections, I can make the change.</p>
</blockquote>
<p>The advantage of the current way of doing things is that parse-time
system messages don't require a transform; they're already in the
document.  This is valuable for testing (unit tests,
tools/quicktest.py).  So if we do decide to make a change, I think
the insertion of parse-time system messages ought to remain as-is
and the Messages transform ought to move all parse-time system
messages (remove from their originally inserted positions, insert in
System Messages section).</p>
</li>
<li><p class="first"><span class="target" id="index-generation">Index Generation</span></p>
</li>
</ul>
</div>
<div class="section" id="html-writer">
<h1><a class="toc-backref" href="#id21">HTML Writer</a></h1>
<ul>
<li><p class="first">Make it easier to find out fragment names (#foo-bar) of <tt class="docutils literal"><span class="pre">_`inline</span>
<span class="pre">targets`</span></tt>.  Currently you have to either look at the source or
guess the fragment.</p>
<p>For example, we could add support for self-referencing targets
(i.e. inline targets would [unobtrusively] link to themselves, so
that you can just click them and then copy the address).  Or we
could add support for titles that display the fragment name (as in
&lt;<a class="reference external" href="http://subversion.tigris.org/mailing-list-guidelines.html">http://subversion.tigris.org/mailing-list-guidelines.html</a>&gt;; just
hover the paragraphs).</p>
<p>Either way it should be optional and deactivated by default.</p>
<p>This would be useful for documents like Docutils' bug list or to-do
list.</p>
</li>
<li><p class="first">Make the <span class="target" id="list-compacting">list compacting</span> logic more generic: For example, allow
for literal blocks or line blocks inside of compact list items.</p>
<p>This is not implementable as long as list compacting is done by
omitting <tt class="docutils literal"><span class="pre">&lt;p&gt;</span></tt> tags.  List compacting would need to be done by
adjusting CSS margins instead.</p>
</li>
<li><p class="first">Add support for <span class="target" id="multiple-stylesheets">multiple stylesheets</span>.  See
&lt;<a class="reference external" href="http://thread.gmane.org/gmane.text.docutils.cvs/4336">http://thread.gmane.org/gmane.text.docutils.cvs/4336</a>&gt;.</p>
</li>
<li><p class="first">Idea for field-list rendering: hanging indent:</p>
<pre class="literal-block">
Field name (bold): First paragraph of field body begins
    with the field name inline.

    If the first item of a field body is not a paragraph,
    it would begin on the following line.
</pre>
</li>
<li><p class="first">Add more support for &lt;link&gt; elements, especially for navigation
bars.</p>
<p>The framework does not have a notion of document relationships, so
probably <a class="reference internal" href="#misc-raw">raw.destination</a> should be used.</p>
<p>We'll have framework support for document relationships when support
for <a class="reference internal" href="#multiple-output-files">multiple output files</a> is added.  The HTML writer could
automatically generate &lt;link&gt; elements then.</p>
</li>
<li><p class="first">Base list compaction on the spacing of source list?  Would require
parser support.  (Idea: fantasai, 16 Dec 2002, doc-sig.)</p>
</li>
<li><p class="first">Add a tool tip (&quot;title&quot; attribute?) to footnote back-links
identifying them as such.  Text in Docutils language module.</p>
</li>
</ul>
</div>
<div class="section" id="pep-html-writer">
<h1><a class="toc-backref" href="#id22">PEP/HTML Writer</a></h1>
<ul>
<li><p class="first">Remove the generic style information (duplicated from html4css1.css)
from pep.css to avoid redundancy.</p>
<p>We need support for <a class="reference internal" href="#multiple-stylesheets">multiple stylesheets</a> first, though.</p>
</li>
</ul>
</div>
<div class="section" id="s5-html-writer">
<h1><a class="toc-backref" href="#id23">S5/HTML Writer</a></h1>
<ul>
<li><p class="first">Add a way to begin an untitled slide.</p>
</li>
<li><p class="first">Add a way to begin a new slide, continuation, using the same title
as the previous slide?  (Unnecessary?)  You need that if you have a
lot of items in one section which don't fit on one slide.</p>
<p>Maybe either this item or the previous one can be realized using
transitions.</p>
</li>
<li><p class="first">Have a timeout on incremental items, so the colour goes away after 1
second.</p>
</li>
<li><p class="first">Add an empty, black last slide (optionally).  Currently the handling
of the last slide is not very nice, it re-cycles through the
incremental items on the last slide if you hit space-bar after the
last item.</p>
</li>
<li><p class="first">Add a command-line option to disable advance-on-click.</p>
</li>
<li><p class="first">Add a speaker's master document, which would contain a small version
of the slide text with speaker's notes interspersed.  The master
document could use <tt class="docutils literal"><span class="pre">target=&quot;whatever&quot;</span></tt> to direct links to a
separate window on a second monitor (e.g., a projector).</p>
<div class="note">
<p class="first admonition-title">Note</p>
<p class="last">This item and the following items are partially
accomplished by the S5 1.2 code (currently in alpha), which has
not yet been integrated into Docutils.</p>
</div>
</li>
<li><p class="first">Speaker's notes -- how to intersperse?  Could use reST comments
(&quot;..&quot;), but make them visible in the speaker's master document.  If
structure is necessary, we could use a &quot;comment&quot; directive (to avoid
nonsensical DTD changes, the &quot;comment&quot; directive could produce an
untitled topic element).</p>
<p>The speaker's notes could (should?) be separate from S5's handout
content.</p>
</li>
<li><p class="first">The speaker's master document could use frames for easy navigation:
TOC on the left, content on the right.</p>
<ul class="simple">
<li>It would be nice if clicking in the TOC frame simultaneously
linked to both the speaker's notes frame and to the slide window,
synchronizing both.  Needs JavaScript?</li>
<li>TOC would have to be tightly formatted -- minimal indentation.</li>
<li>TOC auto-generated, as in the PEP Reader.  (What if there already
is a &quot;contents&quot; directive in the document?)</li>
<li>There could be another frame on the left (top-left or bottom-left)
containing a single &quot;Next&quot; link, always pointing to the next slide
(synchronized, of course).  Also &quot;Previous&quot; link?  FF/Rew go to
the beginning of the next/current parent section?  First/Last
also?  Tape-player-style buttons like <tt class="docutils literal"><span class="pre">|&lt;&lt;</span>&nbsp; <span class="pre">&lt;&lt;</span>&nbsp; <span class="pre">&lt;</span>&nbsp; <span class="pre">&gt;</span>&nbsp; <span class="pre">&gt;&gt;</span>&nbsp; <span class="pre">&gt;&gt;|</span></tt>?</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="latex-writer">
<h1><a class="toc-backref" href="#id24">LaTeX writer</a></h1>
<ul class="simple">
<li>Add an <tt class="docutils literal"><span class="pre">--embed-stylesheet</span></tt> (and <tt class="docutils literal"><span class="pre">--link-stylesheet</span></tt>) option.</li>
</ul>
</div>
<div class="section" id="front-end-tools">
<h1><a class="toc-backref" href="#id25">Front-End Tools</a></h1>
<ul>
<li><p class="first">What about if we don't know which Reader and/or Writer we are
going to use?  If the Reader/Writer is specified on the
command-line?  (Will this ever happen?)</p>
<p>Perhaps have different types of front ends:</p>
<ol class="loweralpha simple">
<li><span class="target" id="fully-qualified">Fully qualified</span>: Reader and Writer are hard-coded into the
front end (e.g. <tt class="docutils literal"><span class="pre">pep2html</span> <span class="pre">[options]</span></tt>, <tt class="docutils literal"><span class="pre">pysource2pdf</span>
<span class="pre">[options]</span></tt>).</li>
<li><span class="target" id="partially-qualified">Partially qualified</span>: Reader is hard-coded, and the Writer is
specified a sub-command (e.g. <tt class="docutils literal"><span class="pre">pep2</span> <span class="pre">html</span> <span class="pre">[options]</span></tt>,
<tt class="docutils literal"><span class="pre">pysource2</span> <span class="pre">pdf</span> <span class="pre">[options]</span></tt>).  The Writer is known before option
processing happens, allowing the OptionParser to be built
dynamically.  Alternatively, the Writer could be hard-coded and
the Reader specified as a sub-command (e.g. <tt class="docutils literal"><span class="pre">htmlfrom</span> <span class="pre">pep</span>
<span class="pre">[options]</span></tt>).</li>
<li><span class="target" id="unqualified">Unqualified</span>: Reader and Writer are specified as subcommands
(e.g. <tt class="docutils literal"><span class="pre">publish</span> <span class="pre">pep</span> <span class="pre">html</span> <span class="pre">[options]</span></tt>, <tt class="docutils literal"><span class="pre">publish</span> <span class="pre">pysource</span> <span class="pre">pdf</span>
<span class="pre">[options]</span></tt>).  A single front end would be sufficient, but
probably only useful for testing purposes.</li>
<li><span class="target" id="dynamic">Dynamic</span>: Reader and/or Writer are specified by options, with
defaults if unspecified (e.g. <tt class="docutils literal"><span class="pre">publish</span> <span class="pre">--writer</span> <span class="pre">pdf</span>
<span class="pre">[options]</span></tt>).  Is this possible?  The option parser would have
to be told about new options it needs to handle, on the fly.
Component-specific options would have to be specified <em>after</em>
the component-specifying option.</li>
</ol>
<p>Allow common options before subcommands, as in CVS?  Or group all
options together?  In the case of the <a class="reference internal" href="#fully-qualified">fully qualified</a>
front ends, all the options will have to be grouped together
anyway, so there's no advantage (we can't use it to avoid
conflicts) to splitting common and component-specific options
apart.</p>
</li>
<li><p class="first">Parameterize help text &amp; defaults somehow?  Perhaps a callback?  Or
initialize <tt class="docutils literal"><span class="pre">settings_spec</span></tt> in <tt class="docutils literal"><span class="pre">__init__</span></tt> or <tt class="docutils literal"><span class="pre">init_options</span></tt>?</p>
</li>
<li><p class="first">Disable common options that don't apply?</p>
</li>
<li><p class="first">Add <tt class="docutils literal"><span class="pre">--section-numbering</span></tt> command line option.  The &quot;sectnum&quot;
directive should override the <tt class="docutils literal"><span class="pre">--no-section-numbering</span></tt> command
line option then.</p>
</li>
<li><p class="first">Create a single <a class="reference internal" href="#dynamic">dynamic</a> or <a class="reference internal" href="#unqualified">unqualified</a> front end that can be
installed?</p>
</li>
</ul>
<!-- Local Variables:
mode: indented-text
indent-tabs-mode: nil
sentence-end-double-space: t
fill-column: 70
End: -->
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference external" href="todo.txt">View document source</a>.
Generated on: 2009-12-29 18:29 UTC.
Generated by <a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
